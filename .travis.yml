language: java
jdk: oraclejdk8
matrix:
  include:
    - os: osx
      jdk: 
      env: ECLIPSE_BIN_DIR=/Applications/Eclipse.app/Contents/MacOS
      before_install: brew cask install eclipse-cpp gcc-arm-embedded
cache:
  directories:
    - $HOME/Library/Caches/Homebrew/Cask
env: ECLIPSE_BIN_DIR=$TRAVIS_BUILD_DIR/eclipse PATH=$PATH:$TRAVIS_BUILD_DIR/gcc-arm-none-eabi-5_3-2016q1/bin
before_install:
  - wget "http://www.eclipse.org/downloads/download.php?file=/technology/epp/downloads/release/neon/3/eclipse-cpp-neon-3-linux-gtk-x86_64.tar.gz&mirror_id=1"
  - tar xf "download.php?file=%2Ftechnology%2Fepp%2Fdownloads%2Frelease%2Fneon%2F3%2Feclipse-cpp-neon-3-linux-gtk-x86_64.tar.gz&mirror_id=1"
  - wget "https://launchpad.net/gcc-arm-embedded/5.0/5-2016-q1-update/+download/gcc-arm-none-eabi-5_3-2016q1-20160330-linux.tar.bz2"
  - tar xf gcc-arm-none-eabi-5_3-2016q1-20160330-linux.tar.bz2
install:
  - $ECLIPSE_BIN_DIR/eclipse -noSplash 
    -application org.eclipse.equinox.p2.director 
    -repository http://gnuarmeclipse.sourceforge.net/updates 
    -installIUs ilg.gnuarmeclipse.managedbuild.cross.feature.group 
    -profileProperties org.eclipse.update.install.features=true
script:
  - arm-none-eabi-gcc --version
  - $ECLIPSE_BIN_DIR/eclipse -noSplash 
    -application org.eclipse.cdt.managedbuilder.core.headlessbuild 
    -import $TRAVIS_BUILD_DIR/left/build/kds
    -import $TRAVIS_BUILD_DIR/right/build/kds
    -build all
